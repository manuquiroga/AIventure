<body *ngIf="ocultar">
  <p class="title" *ngIf="dropdown">CREATE YOUR CHARACTER</p>

  <div class="content">
    <div class="dropdown" *ngIf="dropdown">
      <form [formGroup]="reactiveForm" (ngSubmit)="OnFormSubmitted()">
        <div class="drop" id="rol">
          <label for="rolSelect">Rol:</label>
          <select id="rolSelect" formControlName="selectedRol" >
            <option *ngFor="let rol of rols" [value]="rol.value">
              {{ rol.viewValue }}
            </option>
          </select>
        </div>

        <div class="drop" id="especie">
          <label for="especieSelect">Specie:</label>
          <select id="especieSelect" formControlName="selectedEspecie" >
            <option *ngFor="let especie of especies" [value]="especie.value">
              {{ especie.viewValue }}
            </option>
          </select>
        </div>

        <div class="drop" id="sexo">
          <label for="sexoSelect">Sex:</label>
          <select id="sexoSelect" formControlName="selectedSexo" >
            <option *ngFor="let sexo of sexos" [value]="sexo.value">
              {{ sexo.viewValue }}
            </option>
          </select>
        </div>

        <div class="drop" id="nombre">
          <label for="nombreSelect">Name:</label>
          <input matInput formControlName="nombre"  />
        </div>
        <div *ngIf="reactiveForm.get('selectedRol')?.invalid || reactiveForm.get('selectedSexo')?.invalid || reactiveForm.get('selectedEspecie')?.invalid">
          <p class="error-message">All fields are required</p>
        </div>
        
        
        <div *ngIf="reactiveForm.get('nombre')?.hasError('required')">
          <p class="error-message">Name field is required.</p>
        </div>
        <div *ngIf="reactiveForm.get('nombre')?.hasError('pattern')">
          <p class="error-message">Name is not valid.</p>
        </div>
        <div *ngIf="reactiveForm.get('nombre')?.hasError('minLength') || reactiveForm.get('nombre')?.hasError('maxLength')">
          <p class="error-message">Name's lenght is invalid.</p>
        </div>
        
        <a id="next" (click)="nextButton()" class="nextButton" >Next</a>
        <a class="back" (click)="volver()">Back</a>
      </form>
    </div>

    <div class="distribution" *ngIf="distribution">
      <p class="title" *ngIf="distribution">REMAINING POINTS: {{ puntos }}</p>
      <div class="attributes">
        <div class="attribute fuerza" (data-value)="(fuerza)">
          <p>Strenght:</p>
          <div class="lineas">
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 1 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 2 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 3 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 4 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 5 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': fuerza >= 6 }"
            ></div>
          </div>
          <div>
            <button class="add" (click)="addFuerza()">+</button>
            <button (click)="removeFuerza()">-</button>
          </div>
        </div>
        <div class="attribute destreza" (data-value)="(destreza)">
          <p>Dexterity:</p>
          <div class="lineas">
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 1 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 2 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 3 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 4 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 5 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': destreza >= 6 }"
            ></div>
          </div>
          <div>
            <button class="add" (click)="addDestreza()">+</button>
            <button (click)="removeDestreza()">-</button>
          </div>
        </div>
        <div class="attribute inteligencia">
          <p>Intelligence:</p>
          <div class="lineas">
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 1 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 2 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 3 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 4 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 5 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': inteligencia >= 6 }"
            ></div>
          </div>
          <div>
            <button class="add" (click)="addInteligencia()">+</button>
            <button (click)="removeInteligencia()">-</button>
          </div>
        </div>
        <div class="attribute carisma">
          <p>Charisma:</p>
          <div class="lineas">
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 1 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 2 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 3 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 4 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 5 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': carisma >= 6 }"
            ></div>
          </div>
          <div>
            <button class="add" (click)="addCarisma()">+</button>
            <button (click)="removeCarisma()">-</button>
          </div>
        </div>
        <div class="attribute coraje">
          <p>Courage:</p>
          <div class="lineas">
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 1 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 2 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 3 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 4 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 5 }"
            ></div>
            <div
              class="linea"
              [ngClass]="{ 'linea-activa': coraje >= 6 }"
            ></div>
          </div>
          <div>
            <button class="add" (click)="addCoraje()">+</button>
            <button (click)="removeCoraje()">-</button>
          </div>
        </div>
      </div>

      <a class="end" (click)="finishCharButton()">Create</a>
      <p class="error-message" *ngIf="notGoThrough">
        *Assign at least 4 points
      </p>
    </div>
  </div>
</body>
